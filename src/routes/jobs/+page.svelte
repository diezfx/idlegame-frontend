<script lang="ts">
	import { invalidateAll } from '$app/navigation';
	import { gameStateStore } from '$lib/stores/gamestate.svelte';
	import JobView from '$lib/widgets/job.svelte';

	const jobs = await gameStateStore.getJobs();

	function stopJob(id: bigint) {
		gameStateStore.startJob;
		invalidateAll();
	}
</script>

<h1>Jobs</h1>
<div class="grid grid-cols-3 gap-4">
	{#each jobs as [_, job]}
		<JobView {job} onStop={() => stopJob(job.entity?.id!)} />
	{/each}
</div>
